!function(a,b){if(typeof module==="object"&&module.exports){module.exports=b(a)}else{a.horse=b(a)}}(typeof window!=="undefined"?window:this,function(){function a(S,y){var C=13;var D=27;var K=38;var z=40;var P=y||{};var u=typeof P.limit==="number"?P.limit:Infinity;var w=P.suggestions;var U=P.onselect||l;var F=O("ul","sey-list");F.style.top=d(S)+k(S)+S.style.marginBottom+"px";F.style.left=e(S)+"px";var b=[];var m=null;var v=null;var t=0;document.body.appendChild(F);S.setAttribute("autocomplete","off");if(Array.isArray(w)){J(w)}B();function B(){S.onkeydown=q;S.onkeyup=R;S.onpaste=E;document.onclick=function(){Q()}}function L(W,o){var Y=c(o)||"";var V=I(o)||"";var X=W.toLowerCase();return A(X,Y.toLowerCase())||A(X,V.toLowerCase())}function j(o){if(L(S.value,w[o.i])){r(o.li);if(v==null||o.i<v.i){v=o}}else{M(o.li);if(v&&o.i==v.i){v=null}}}function E(){b.forEach(j);if(!x()){G()}if((!m)||n(m)){h()}}function J(o){H();for(var V=0;V<o.length;V++){b.push({i:V,li:g(o[V])})}}function I(o){return f("value",o)}function c(o){return f("text",o)}function f(o,V){return V&&V[o]!==void 0?V[o]:V}function x(){return F.className.indexOf("sey-show")!==-1}function n(o){return o.className.indexOf("sey-hide")!==-1}function r(o){if(n(o)&&u>t){o.className=o.className.replace(/ sey-hide/g,"");t++}}function M(o){if(!n(o)){o.className+=" sey-hide";t--;if(m===o){h()}}}function G(){if(!x()){F.className+=" sey-show"}}function Q(){F.className=F.className.replace(/ sey-show/g,"");i(m);b.forEach(function(o){M(o.li)});m=null;t=0;v=null}function g(V){var o=O("li","sey-item sey-hide");o.innerText=o.textContent=c(V);F.appendChild(o);o.onclick=function(){U(S,o,V);Q()};return o}function H(){while(F.lastChild){F.removeChild(F.lastChild)}}function h(){if(v){N(v.li)}}function N(o){i();if(o){m=o;m.className+=" sey-selected"}}function i(){if(m){m.className=m.className.replace(/ sey-selected/g,"");m=null}}function T(){if(m){var o=m.nextSibling;while(o){if(o){if(!n(o)){N(o);break}else{o=o.nextSibling}}else{break}}}else{h()}}function s(){if(m){var o=m.previousSibling;while(o){if(o){if(!n(o)){N(o);break}else{o=o.previousSibling}}else{break}}}else{h()}}function O(W,V){var o=document.createElement(W);o.className=V;return o}function q(o){var V=o.which||o.keyCode;if(V===z){p(o)}else{if(V===K){p(o)}else{if(V===C){p(o)}}}}function R(V){var o=x();var W=V.which||V.keyCode;if(o&&W===z){T();p(V)}else{if(o&&W===K){s();p(V)}else{if(o&&W===D){Q();p(V)}else{if(o&&W===C){if(m){m.click();Q()}p(V)}else{E()}}}}}function p(o){o.stopPropagation();o.preventDefault()}function l(W,o,V){W.value=I(V)}function A(aa,Z){var Y=Z.length;var o=aa.length;if(o>Y){return false}if(o===Y){return aa===Z}outer:for(var W=0,V=0;W<o;W++){var X=aa.charCodeAt(W);while(V<Y){if(Z.charCodeAt(V++)===X){continue outer}}return false}return true}function e(o){return o.offsetParent?o.offsetLeft+e(o.offsetParent):o.offsetLeft}function d(o){return o.offsetParent?o.offsetTop+d(o.offsetParent):o.offsetTop}function k(o){return o.clientHeight||o.offsetHeight}}return a});